<!doctype html>
<html lang="en">
<head>
    <title>AIDE: {{ projectShortname }}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <link rel="stylesheet" href="/static/interface/css/interface.css?v={{ version }}" />
    <link rel="stylesheet" href="/static/general/css/messaging.css?v={{ version }}" />
    <link rel="stylesheet" href="/static/aiController/css/workflowMonitor.css?v={{ version }}" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js?v={{ version }}" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/static/general/js/messaging.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/util.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/uiControlHandler.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/commandListener.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/configuration.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/renderPrimitives.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/viewport/imageViewport.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/annotationPrimitives.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/labelClassHandler.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/dataEntry.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/dataHandler.js?v={{ version }}"></script>
    <!-- <script type="text/javascript" src="/static/interface/js/aiWorkerHandler.js?v={{ version }}"></script> -->
    <script src="/static/general/js/overlay.js?v={{ version }}"></script>
    <script src="/static/general/js/progressbar.js?v={{ version }}"></script>
    <script src="/static/aiController/js/workflowMonitor.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/uitutorial.js?v={{ version }}"></script>
    <script type="text/javascript" src="/static/interface/js/init.js?v={{ version }}"></script>
</head>

<body>
    <!-- Page Content -->
    <div id="page-container">
        <div id="content-wrapper">
            <!-- Overlay -->
            <div id="overlay" class="overlay">
                <div id="overlay-card" class="overlay-card card container"></div>
                <div id="overlay-loader">
                    <div style="text-align:center;margin-bottom:20px;font-size:20px;text-align:center;">Loading...</div>
                    <!-- blatant copy of MS azure's splash screen loading dots -->
                    <div class="azure-loadingdots">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>
            </div>

            <!-- Navigation bar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-dark border-bottom">
                <ul class="nav navbar-nav">
                    <li class="nav-item header-text">
                        <div class="project-path"><a href="/">Projects</a> / <a href="/{{ projectShortname }}" style="font-weight:bold">{{ projectShortname }}</a> / <a href="interface">interface</a></div>
                        <h1 id="project-title">{{ projectTitle }}: annotation interface</h1>
                    </li>
                </ul>
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item" id="project-config-links" style="display:none;margin-right:120px;">
                        <a class="btn btn-sm btn-success" href="configuration/overview" target="_blank">Statistics</a>
                        <a class="btn btn-sm btn-secondary" href="configuration/general" target="_blank">Configure</a>
                        <a class="btn btn-sm btn-dark" href="configuration/dataManagement" target="_blank">Data Management</a>
                        <a class="btn btn-sm btn-info" href="configuration/aiModel" target="_blank">AI model</a>
                    </li>
                    <li class="nav-item dropdown float-right">
                        <button class="btn btn-sm btn-info" onclick="javascript:window.showTutorial();">Help</button>
                        <a id="login-button" class="btn btn-sm btn-primary" href="/login?redirect={{ projectShortname }}/interface" style="display:none;">Log in</a>
                        <div class="dropdown nav navbar-nav" id="navbar-dropdown" style="float:right;">
                            <a class="dropdown-toggle btn" id="navbar-user-dropdown" data-toggle="dropdown" href="#" style="color:white;font-weight:bold;" >{{ username }}</a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="navbar-user-dropdown">
                                <li class="dropdown-item"><button id="logout" class="btn btn-sm btn-danger">Log Out</button></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class="grad-border-h"></div>

            <div class="wrapper h-100">

                <!-- <div style="float:left;width:350px;"></div> -->

                <!-- Image Display -->
                <div id="gallery-container">
                    <div id="gallery"></div>
                    <div id="gallery-scroll-tooltip-bottom" class="scroll-tooltip">More</div>
                    <div class="container widescreen" id="interface-controls"></div>
                </div>

                <div id="viewport-controls"></div>

                <div class="grad-border-v" id="tools-container-resize-handle"></div>

                <!-- Toolboxes -->
                <div id="tools-container">                
                    <!-- Label Classes search box -->
                    <div id="classes-container" class="toolbox" style="order:0;flex-shrink:0">
                        <h2>Classes</h2>
                        <input type="search" id="labelclass-search-box" placeholder="find..." />
                        <!-- <div class="labelGroup" id="legend-entries-active">
                            <h3 class="expanded">In use</h3>
                            <div class="labelGroup-children" id="legend-entries-active-container"></div>
                        </div> -->
                    </div>

                    <!-- Label Classes -->
                    <div id="classes-container" class="toolbox" style="order:1;height:100%">
                        <div id="legend-entries"></div>
                    </div>
                    
                    <div id="toolbox-divider" class="grad-border-h" style="order:2;flex-shrink:0;margin-top:10px;margin-bottom:10px;display:none;"></div>
                    
                    <!-- Image sequence controls -->
                    <div id="review-controls-container" class="toolbox" style="order:3;display:none;">
                        <h2 id="imorder-title">Image Order</h2>
                        <div id="imorder-box" style="display:none;">
                            <input type="radio" id="imorder-auto" name="imorder" value="imorder-auto" checked />
                            <label for="imorder-auto">automatic</label><br />
                            <input type="radio" id="imorder-review" name="imorder" value="imorder-review" />
                            <label for="imorder-review">review annotations</label><br />
                            
                            <div id="review-controls" style="display:none">
                                <input type="checkbox" id="review-enable-editing" />
                                <label for="review-enable-editing">enable editing</label><br />
                                <div style="margin-left:20px;color:gray;font-size:9pt;font-style:italic;white-space:normal;word-wrap:break-word;">If editing is enabled, all annotations on screen will be copied and committed under your account.</div>
                                <input type="checkbox" id="review-skip-empty" />
                                <label for="review-skip-empty">skip empty images</label><br />
                                <input type="checkbox" id="review-golden-questions-only" />
                                <label for="review-golden-questions-only">only show golden questions</label><br />
                                <div>Date and time:</div>
                                <input type="range" id="review-timerange" min="0" max="0" value="0" /><br />
                                <div id="review-time-text" style="color:gray"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="page-footer" id="footer">

            <!-- Mini message entry -->
            <div id="footer-message-panel" style="display:none;"></div>

            <!-- Collapsible AI worker panel -->
            <div id="ai-worker-panel" class="ai-worker-panel">
                <h2 id="ai-worker-panel-header">AI Backend</h2>
                <div class="grad-border-h"></div>
                <div class="container" id="ai-task-monitor" style="max-height:330px;overflow-y:auto;"></div>
                <!-- TODO: new task list -->
                <!-- <div class="container" id="ai-manual-controls">
                </div>
                <div class="ai-worker-container container" id="ai-worker-container">
                    <h3 class="ai-category-header expanded" id="ai-worker-header">Workers</h3>
                    <div class="ai-entries" id="ai-worker-entries"></div>
                    <h3 class="ai-category-header expanded" id="ai-tasks-header">Tasks</h3>
                    <div class="ai-entries" id="ai-tasks-entries"></div>
                </div> -->
                <div class="grad-border-h" style="position:absolute;bottom:0"></div>
            </div>

            <!-- Mini-entry in footer to it -->
            <div class="ai-worker-panel" id="ai-worker-minipanel" style="display:none;">
                <div class="grad-border-v"></div>
                <span class="minipanel-span">AI</span>
                <!-- <span class="minipanel-span" style="color:green">work in progress; click here to check status</span> -->
                <div id="ai-minipanel-status" class="minipanel-span" style="flex:3"></div>
                <div class="grad-border-v"></div>
            </div>

            <div class="ms-logo">
                <a href="about"><img height="100%" src="/static/general/img/ms_logo.png" /></a>
            </div>
        </footer>
    </div>

    <!-- messaging overlay -->
    <div id="messager-container" class="messager-container"></div>
</body>

</html>